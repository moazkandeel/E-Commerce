"use strict";(self.webpackChunke_commerce=self.webpackChunke_commerce||[]).push([[811,509],{4327:(e,t,s)=>{s.d(t,{A:()=>h});var a=s(5043),r=s(2312),n=s(2907),c=s(5475),i=s(7154),o=s(3768),d=s(1521),l=s(9509),u=s(5358),m=s(579);function h(){const{setcount:e}=(0,a.useContext)(d.M),{changeCount:t}=(0,a.useContext)(l.CounterContext),{addToCart:s}=(0,a.useContext)(d.M);let{addToWishList:h,getWishItem:x}=(0,a.useContext)(u.WishListContext);const{data:f,isLoading:p,isError:g}=(0,n.useQuery)("featuredProducts",(async()=>{try{return(await i.A.get("https://ecommerce.routemisr.com/api/v1/products")).data}catch(e){throw console.error("Error fetching products: ",e),e}}));const[j,v]=(0,a.useState)([]);return(0,a.useEffect)((()=>{!async function(){let{data:e}=await x();v(null===e||void 0===e?void 0:e.data.map((e=>e._id)))}()})),p?(0,m.jsx)("div",{className:"loading-spinner",children:(0,m.jsx)(r.oJ,{height:100,width:100,radius:5,color:"#4fa94d",ariaLabel:"ball-triangle-loading",wrapperStyle:{},wrapperClass:"d-flex justify-content-center mt-5 ",visible:!0})}):(0,m.jsx)("div",{children:(0,m.jsx)("div",{className:"row gy-4  py-5",children:null===f||void 0===f?void 0:f.data.map((a=>{return(0,m.jsx)("div",{className:"col-lg-2",children:(0,m.jsxs)("div",{className:"product p-2 shadow",children:[(0,m.jsxs)(c.N_,{to:"/productdetails/".concat(a.id),children:[(0,m.jsx)("img",{src:a.imageCover,className:"w-100",alt:a.title}),(0,m.jsx)("span",{className:"font-sm text-main",children:a.category.name}),(0,m.jsx)("h3",{children:a.title.split(" ").splice(0,2).join(" ")}),(0,m.jsxs)("div",{className:"d-flex py-3 justify-content-between align-item-center",children:[(0,m.jsxs)("span",{className:"font-sm",children:[a.price,"EGP"]}),(0,m.jsxs)("span",{className:"font-sm",children:[(0,m.jsx)("i",{className:"fas fa-star rating-color me-1"}),a.ratingsAverage]})]})]}),(0,m.jsxs)("span",{className:"",onClick:()=>{!async function(e){let{data:t}=await h(e);"success"==t.status?o.Ay.success(t.message,{duration:2e3,icon:(0,m.jsx)("i",{className:"fa-solid fa-heart heart text-danger fa-3x"})}):o.Ay.error(t.message,{duration:2e3})}(a._id)},children:[" ",(r=a._id,null!==j&&void 0!==j&&j.includes(r)?(0,m.jsx)("i",{className:"fa-solid fa-heart fs-2 text-danger heart cursor-pointer"}):(0,m.jsx)("i",{className:"fa-solid fa-heart fs-2 heart cursor-pointer"}))]}),(0,m.jsx)("button",{onClick:()=>{(async t=>{try{const{data:a}=await s(t);"success"===a.status&&(o.Ay.success(a.message),e(a.numOfCartItems))}catch(a){o.Ay.error("Failed to add product to cart"),console.error("Error adding product to cart:",a)}})(a.id),t(a.id)},className:"btn bg-main text-main-light w-100 btn-sm",children:"Add To Cart"})]})},a.id);var r}))})})}},6811:(e,t,s)=>{s.r(t),s.d(t,{default:()=>n});s(5043);var a=s(4327),r=s(579);function n(){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.A,{})})}},9509:(e,t,s)=>{s.r(t),s.d(t,{CounterContext:()=>n,default:()=>c});var a=s(5043),r=s(579);let n=(0,a.createContext)();function c(e){const[t,s]=(0,a.useState)(0);return(0,r.jsx)(n.Provider,{value:{count:t,changeCount:function(){s(Math.random())}},children:e.children})}}}]);
//# sourceMappingURL=811.26476357.chunk.js.map