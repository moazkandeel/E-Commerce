"use strict";(self.webpackChunke_commerce=self.webpackChunke_commerce||[]).push([[277],{4277:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(5043),i=t(3216),c=t(7154),n=t(2312),r=t(2382),l=t(2907),d=t(1521),o=t(3768),m=t(5358),u=t(579);const h=()=>{let{setcount:e}=(0,a.useContext)(d.M);let{data:s,isFetching:t,isLoading:h,isError:f}=(0,l.useQuery)("featuredProducts",(function(){return c.A.get("https://ecommerce.routemisr.com/api/v1/products")}),{cacheTime:3e3,staleTime:500}),{addToCart:x}=(0,a.useContext)(d.M);const[p,g]=(0,a.useState)({}),[j,w]=(0,a.useState)(!0);let{id:y}=(0,i.g)();let{getWishItem:N,addToWishList:v}=(0,a.useContext)(m.WishListContext);const[b,C]=(0,a.useState)([]);async function A(){let{data:e}=await N();C(null===e||void 0===e?void 0:e.data.map((e=>e._id)))}return(0,a.useEffect)((()=>{!async function(e){let{data:s}=await c.A.get("https://ecommerce.routemisr.com/api/v1/products/".concat(e));g(s.data),w(!1),A()}(y)}),[]),(0,u.jsx)(u.Fragment,{children:1==j?(0,u.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100 ",children:(0,u.jsx)(n.oJ,{height:100,width:100,radius:5,color:"#4fa94d",ariaLabel:"ball-triangle-loading",wrapperStyle:{},wrapperClass:"text-main",visible:!0})}):(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"row d-flex justify-content-center align-items-center p-4",children:[(0,u.jsx)("div",{className:"col-md-4",children:(0,u.jsx)(r.A,{dots:!1,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:1e3,children:p.images.map(((e,s)=>(0,u.jsx)("img",{src:e,alt:p.title,className:"w-100 p-5"},s)))})}),(0,u.jsx)("div",{className:"col-md-8",children:(0,u.jsxs)("div",{className:" p-2 rounded-4",children:[(0,u.jsx)("h3",{className:"h5 py-2 fw-bold",children:p.title}),(0,u.jsx)("p",{children:p.description}),(0,u.jsx)("span",{className:"text-main fw-bold font-sm",children:p.category.name}),(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center py-2 fw-bold",children:[(0,u.jsxs)("span",{className:"font-sm",children:[p.price," EGP"]}),(0,u.jsxs)("span",{className:"",onClick:()=>{!async function(e){let{data:s}=await v(e);"success"==s.status?o.Ay.success(s.message,{duration:2e3,icon:(0,u.jsx)("i",{className:"fa-solid fa-heart text-danger heart fa-3x cursor-pointer"})}):o.Ay.error(s.message,{duration:2e3})}(p._id)},children:[" ",function(e){return b.includes(e)?(0,u.jsx)("i",{className:"fa-solid fa-heart fs-2 text-danger heart cursor-pointer "}):(0,u.jsx)("i",{className:"fa-solid fa-heart fs-2 heart cursor-pointer"})}(p.id)]}),(0,u.jsxs)("span",{children:[(0,u.jsx)("i",{className:"fas fa-star rating-color me-1"}),p.ratingsAverage]})]}),(0,u.jsx)("button",{className:"btn bg-main w-100 text-white ",onClick:()=>{!async function(s){let{data:t}=await x(s);A(),"success"==t.status?(o.Ay.success(t.message,{duration:2e3}),e(t.numOfCartItems)):o.Ay.error(t.message,{duration:2e3})}(p._id)},children:"AddToCart"})]})})]})})})}}}]);
//# sourceMappingURL=277.71181bfd.chunk.js.map